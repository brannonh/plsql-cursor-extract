{
  "type": "Program",
  "body": [
    {
      "type": "NamedBlock",
      "name": "pick_a_plate",
      "params": [
        {
          "type": "ParamDefinition",
          "name": "in_taskid",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_shlpid",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_user",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_plannedlp",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_pickedlp",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_custid",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_item",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_orderitem",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_lotno",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_qty",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_dropseq",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_pickfac",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_pickloc",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_uom",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_lplotno",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_mlip",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_picktype",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_tasktype",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_picktotype",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_fromloc",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_subtask_rowid",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_extra_process",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_picked_child",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_pkd_lotno",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_pkd_serialno",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_pkd_user1",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_pkd_user2",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_pkd_user3",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_pickuom",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_pickqty",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_weight",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_taskedlp",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "in_vasid",
          "in": true
        },
        {
          "type": "ParamDefinition",
          "name": "out_lpcount",
          "out": true
        },
        {
          "type": "ParamDefinition",
          "name": "out_error",
          "out": true
        },
        {
          "type": "ParamDefinition",
          "name": "out_message",
          "out": true
        }
      ],
      "declare": {
        "type": "DeclarationBlock",
        "variables": [
          {
            "type": "VariableDeclaration",
            "name": "errmsg"
          },
          {
            "type": "VariableDeclaration",
            "name": "singleonly"
          },
          {
            "type": "VariableDeclaration",
            "name": "cnt"
          },
          {
            "type": "VariableDeclaration",
            "name": "out_msg"
          },
          {
            "type": "VariableDeclaration",
            "name": "l_orderid"
          },
          {
            "type": "VariableDeclaration",
            "name": "l_shipid"
          },
          {
            "type": "VariableDeclaration",
            "name": "l_type"
          },
          {
            "type": "VariableDeclaration",
            "name": "l_uom"
          },
          {
            "type": "VariableDeclaration",
            "name": "l_profid"
          },
          {
            "type": "VariableDeclaration",
            "name": "l_msg"
          },
          {
            "type": "VariableDeclaration",
            "name": "l_sscc"
          },
          {
            "type": "VariableDeclaration",
            "name": "l_keepconfig"
          },
          {
            "type": "VariableDeclaration",
            "name": "pcs"
          },
          {
            "type": "VariableDeclaration",
            "name": "ORL"
          }
        ],
        "cursors": [
          {
            "type": "CursorDeclaration",
            "params": [
              {
                "type": "ParamDefinition",
                "name": "p_lpid"
              }
            ],
            "name": "c_lp",
            "select": " select P.location, P.quantity, L.section, L.equipprof, P.parentlpid, P.lotnumber, P.useritem1, P.useritem2, P.useritem3, P.serialnumber, P.type, L.pickingseq, L.pickingzone, P.inventoryclass, P.invstatus, P.weight, P.status, P.virtuallp, P.manufacturedate, P.expirationdate, L.loctype, nvl( P.qtytasked,0) qtytasked, P.lpid, P.qtyrcvd, P.length, P.width, P.height, P.pallet_weight from plate P, location L where P.lpid= p_lpid and L.facility= in_pickfac and L.locid= P.location"
          },
          {
            "type": "CursorDeclaration",
            "params": [
              {
                "type": "ParamDefinition",
                "name": "in_parentlpid"
              }
            ],
            "name": "curChildren",
            "select": " select lpid, weight, fromlpid, custid, item, pickuom, orderid, shipid, orderitem, orderlot, type from shippingplate where parentlpid= in_parentlpid"
          },
          {
            "type": "CursorDeclaration",
            "params": [
              {
                "type": "ParamDefinition",
                "name": "in_parentlpid"
              }
            ],
            "name": "curPlateChildren",
            "select": " select lpid from plate where parentlpid= in_parentlpid"
          },
          {
            "type": "CursorDeclaration",
            "params": [
              {
                "type": "ParamDefinition",
                "name": "in_parentlpid"
              }
            ],
            "name": "curChildPlateSummary",
            "select": " select count(1) as count, sum( quantity) as quantity from shippingplate where parentlpid= in_parentlpid"
          },
          {
            "type": "CursorDeclaration",
            "params": [
              {
                "type": "ParamDefinition",
                "name": "in_orderid"
              },
              {
                "type": "ParamDefinition",
                "name": "in_shipid"
              },
              {
                "type": "ParamDefinition",
                "name": "in_orderitem"
              },
              {
                "type": "ParamDefinition",
                "name": "in_orderlot"
              }
            ],
            "name": "curOrderDtl",
            "select": " select* from orderdtl where orderid= in_orderid and shipid= in_shipid and item= in_orderitem and nvl( lotnumber,(none))= nvl( in_orderlot,(none))"
          },
          {
            "type": "CursorDeclaration",
            "params": [],
            "name": "curanyshippingplate",
            "select": " select lpid from shippingplate where fromlpid in( select lpid from plate start with lpid= in_carton connect by prior lpid= parentlpid)"
          }
        ]
      }
    },
    {
      "type": "Symbol",
      "value": "/"
    }
  ]
}